function initialize(){getAllListings(),addEventListeners()}function addEventListeners(){$(".newProperty").on("click","#saleProp",saleRadio),$(".newProperty").on("click","#rentalProp",rentalRadio),$(".newProperty").on("submit",addNewProperty)}function resetInputs(){$("#saleProp").prop("checked",!0),saleRadio();$("#location").val(""),$("#size").val(""),$("#price").val("")}function saleRadio(){forSale=!0,$("#price").attr("placeholder","Sale Price")}function rentalRadio(){forSale=!1,$("#price").attr("placeholder","Annualized Rent")}function addNewProperty(a){a.preventDefault();var b=$("#location").val(),c=$("#size").val(),d=$("#price").val();if(""===b||""===c||""===d)alert("Please complete all input fields. Thank you, kindly.");else{var e={location:b,size:c,price:d,forSale:forSale};resetInputs(),postProperty(e)}}function displayListings(a){$("#for-sale").empty(),$("#for-rent").empty();for(var b=0;b<a.length;b++){var c=a[b];c.cost?displaySaleProperty(c):displayRentalProperty(c)}}function displaySaleProperty(a){var b=a.city,c=a.sqft,d=toUSD(a.cost);$("#for-sale").append('<div class="col-sm-4"><table class="table table-striped"></table></div>');var e=$("#for-sale").children().last().children().last();e.append('<thead class="sale"><tr><th class="text-center"><div><span class="glyphicon glyphicon-home" aria-hidden="true"></span></div></th><th>Property Details</th>'),e.append("<tbody>"),e.children().last().append('<tr><td class="text-right">Location:</td><td>'+b+"</td>"),e.children().last().append('<tr><td class="text-right">Space:</td><td>'+c+" sq ft</td>"),e.children().last().append('<tr><td class="text-right">Cost:</td><td>'+d+"</td>")}function displayRentalProperty(a){var b=a.city,c=a.sqft,d=parseInt(a.rent/12),e=toUSD(d);$("#for-rent").append('<div class="col-sm-4"><table class="table table-striped"></table></div>');var f=$("#for-rent").children().last().children().last();f.append('<thead class="rental"><tr><th class="text-center"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span></th><th>Rental Details</th>'),f.append("<tbody>"),f.children().last().append('<tr><td class="text-right">Location:</td><td>'+b+"</td>"),f.children().last().append('<tr><td class="text-right">Space:</td><td>'+c+" sq ft</td>"),f.children().last().append('<tr><td class="text-right">Rent:</td><td>'+e+" per mo.</td>")}function toUSD(a){var b=a.toString(),c="$";return b.length<4?c+=b:b.length<7?c+=b.substring(0,b.length-3)+","+b.substring(b.length-3):b.length<10&&(c+=b.substring(0,b.length-6)+","+b.substring(b.length-6,b.length-3)+","+b.substring(b.length-3)),c}function getAllListings(){$.ajax({type:"GET",url:"/listings",success:function(a){displayListings(a)}})}function postProperty(a){console.log("posting property:",a),$.ajax({type:"POST",url:"/listings/new",data:a,success:function(a){getAllListings()}})}var forSale=!0;$(document).ready(function(){initialize()});